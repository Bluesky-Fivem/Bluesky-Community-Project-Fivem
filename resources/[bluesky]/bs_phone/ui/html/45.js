(window.webpackJsonp=window.webpackJsonp||[]).push([[45,69],{1054:function(e,t,a){"use strict";var n=a(1),r=a(5),o=a(0),i=(a(2),a(6)),c=a(8),l=a(11),s=a(540),u=o.forwardRef((function(e,t){var a=e.classes,c=e.className,u=e.color,p=void 0===u?"primary":u,m=e.position,d=void 0===m?"fixed":m,f=Object(r.a)(e,["classes","className","color","position"]);return o.createElement(s.a,Object(n.a)({square:!0,component:"header",elevation:4,className:Object(i.a)(a.root,a["position".concat(Object(l.a)(d))],a["color".concat(Object(l.a)(p))],c,"fixed"===d&&"mui-fixed"),ref:t},f))}));t.a=Object(c.a)((function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0,"@media print":{position:"absolute"}},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},positionRelative:{position:"relative"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText},colorInherit:{color:"inherit"},colorTransparent:{backgroundColor:"transparent",color:"inherit"}}}),{name:"MuiAppBar"})(u)},522:function(e,t,a){"use strict";a.r(t),a.d(t,"SendMessage",(function(){return c})),a.d(t,"ReadConvo",(function(){return l})),a.d(t,"DeleteConvo",(function(){return s}));var n=a(23);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=function(e){return function(t){n.a.send("SendMessage",e).then((function(a){return null!=a&&(t({type:"ADD_DATA",payload:{type:"messages",first:!0,data:o({},e)}}),!0)}))}},l=function(e,t){return function(a){n.a.send("ReadConvo",e).then((function(){a({type:"SET_DATA",payload:{type:"messages",data:t.map((function(t){return o(o({},t),{},{unread:t.number!==e&&t.unread})}))}})})).catch((function(e){}))}},s=function(e,t,a){return function(t){n.a.send("DeleteConvo",e).then((function(){return t({type:"SET_DATA",payload:{type:"messages",data:a.filter((function(t){return t.number!=e}))}}),!0})).catch((function(e){return!1}))}}},559:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),i=a(51),c=a(502),l=a(1054),s=a(99),u=a(242),p=a(222),m=a(543),d=a(540),f=a(1002),b=a(18),h=a(1143),g=a(1144),y=a.n(g),v=a(103),x=a.n(v),w=a(522),k=a(102),C=a(30),E=a(73);function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var S=a(1142);t.default=Object(o.b)(null,{SendMessage:w.SendMessage,DeleteConvo:w.DeleteConvo,ReadConvo:w.ReadConvo,showAlert:k.a,addNotif:C.a,createCall:E.createCall})((function(e){var t=Object(i.e)(),a=e.match.params.number,g=Object(o.d)((function(e){return e.data.data.contacts})).filter((function(e){return e.number===a}))[0],v=Object(o.d)((function(e){return e.data.data.messages})),w=Object(o.d)((function(e){return e.data.data.myData})),k=Object(o.d)((function(e){return e.call.call})),C=O(Object(n.useState)([]),2),E=C[0],j=C[1];Object(n.useEffect)((function(){j(v.filter((function(e){return e.number===a})).sort((function(e,t){return t.time-e.time}))),v.filter((function(e){return e.number===a&&e.unread})).length>0&&e.ReadConvo(a,v)}),[v]);var A=Object(c.a)((function(e){return{wrapper:{height:"100%",background:e.palette.secondary.main,overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},header:{background:null!=g?g.color:e.palette.primary.main,fontSize:20,padding:15,lineHeight:"45px"},avatar:{color:"#fff",height:45,width:45},avatarFav:{color:"#fff",height:45,width:45,border:"2px solid gold"},messageAction:{textAlign:"center","&:hover":{color:e.palette.text.main,transition:"color ease-in 0.15s"}},body:{padding:10,height:"77%",display:"flex",flexDirection:"column-reverse",overflowX:"hidden",overflowY:"auto","&::-webkit-scrollbar":{width:6},"&::-webkit-scrollbar-thumb":{background:"#ffffff52"},"&::-webkit-scrollbar-thumb:hover":{background:e.palette.primary.main},"&::-webkit-scrollbar-track":{background:"transparent"}},input:{width:"100%",padding:"0 10px"},textInput:{width:"100%"},submitBtn:{height:"100%",fontSize:30,textAlign:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.7)","&:hover":{borderBottom:"2px solid #fff",color:e.palette.primary.main,transition:"color, border-bottom ease-in 0.15s"}},submitBtnDisabled:{height:"100%",fontSize:30,textAlign:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.7)",filter:"brightness(0.25)"},submitIcon:{display:"block",margin:"auto",height:"100%",width:"100%"},textWrap:{width:"100%",fontSize:16,margin:"20px 0px",padding:"0 10px",color:e.palette.text.light,"&:first-child":{marginTop:0}},myText:{marginLeft:"auto",width:"fit-content",maxWidth:"75%",padding:15,borderRadius:15,background:e.palette.secondary.dark,wordBreak:"break-all"},otherText:{marginRight:"auto",width:"fit-content",maxWidth:"75%",padding:15,borderRadius:15,background:null!=g?g.color:e.palette.primary.main,wordBreak:"break-all"},timestamp:{color:e.palette.text.main,fontSize:12,padding:"5px 5px 0px 5px"},messageImg:{display:"block",maxWidth:200},copyableText:{color:e.palette.primary.main,textDecoration:"underline","&:hover":{transition:"color ease-in 0.15s",color:e.palette.text.main,cursor:"pointer"}}}}))(),D=O(Object(n.useState)(!1),2),T=D[0],N=D[1],z=O(Object(n.useState)(""),2),B=z[0],I=z[1],P=O(Object(n.useState)({left:110,top:0}),2),R=P[0],M=P[1],Y=function(){N(!1)},F=[{regex:/(http|https):\/\/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)(jpg|png|gif)/gim,fn:function(t,a){return r.a.createElement(h.CopyToClipboard,{text:a[0],key:t,onCopy:function(){return e.showAlert("Link Copied To Clipboard")}},r.a.createElement("img",{key:t,className:A.messageImg,src:a[0]}))}},{regex:/(http|https):\/\/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)(mp4)/gim,fn:function(e,t){return r.a.createElement("div",null,r.a.createElement(y.a,{key:e,volume:.25,width:"100%",controls:!0,url:"".concat(t[0])}))}},{regex:/(http|https):\/\/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)/gim,fn:function(t,a){return r.a.createElement(h.CopyToClipboard,{text:a[0],key:t,onCopy:function(){return e.showAlert("Link Copied To Clipboard")}},r.a.createElement("a",{className:A.copyableText},a.input))}},{regex:/(\S+)\.([a-z]{2,}?)(.*?)( |\,|$|\.)/gim,fn:function(t,a){return r.a.createElement(h.CopyToClipboard,{text:a[0],key:t,onCopy:function(){return e.showAlert("Link Copied To Clipboard")}},r.a.createElement("a",{className:A.copyableText},a.input))}}];return r.a.createElement("div",{className:A.wrapper},r.a.createElement(l.a,{position:"static",className:A.header},r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,xs:2},null!=g?null!=g.avatar&&""!==g.avatar?r.a.createElement(u.a,{className:g.favorite?A.avatarFav:A.avatar,src:g.avatar,alt:g.name.charAt(0)}):r.a.createElement(u.a,{className:g.favorite?A.avatarFav:A.avatar,style:{background:g.color}},g.name.charAt(0)):r.a.createElement(u.a,{className:A.avatar},"#")),r.a.createElement(s.a,{item:!0,xs:6},null!=g?g.name:a),r.a.createElement(s.a,{item:!0,xs:4},r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,xs:6,className:A.messageAction,onClick:function(){null==k&&(e.createCall(a),t.push("/apps/phone/call/".concat(a)))}},r.a.createElement(b.a,{icon:"phone"})),r.a.createElement(s.a,{item:!0,xs:6,className:A.messageAction,onClick:function(e){e.preventDefault(),M({left:e.clientX-2,top:e.clientY-4}),N(!0)}},r.a.createElement(b.a,{icon:"ellipsis-v"}))))),r.a.createElement(p.a,{anchorReference:"anchorPosition",anchorPosition:R,keepMounted:!0,open:T,onClose:Y},r.a.createElement(m.a,{onClick:function(){null!=g?t.push("/apps/contacts/edit/".concat(g._id)):t.push("/apps/contacts/add/".concat(a))}},null!=g?"View Contact":"Create Contact"),r.a.createElement(m.a,{onClick:function(){e.DeleteConvo(a,w.number,v)?(e.showAlert("Conversation Deleted"),t.goBack()):e.showAlert("Unable To Delete Conversation"),Y()}},"Delete Conversation"))),r.a.createElement("div",{className:A.body},E.map((function(e,t){return r.a.createElement("div",{key:t,className:A.textWrap},r.a.createElement(d.a,{className:1===e.method?A.myText:A.otherText},S(F)(e.message)),r.a.createElement("div",{className:A.timestamp,style:{textAlign:1===e.method?"right":"left"}},r.a.createElement(x.a,{titleFormat:"M/D/YYYY h:mm:ss A",withTitle:!0,fromNow:!0},+e.time)))}))),r.a.createElement("div",{className:A.input},r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,xs:10},r.a.createElement(f.a,{className:A.textInput,label:"Send New Message",multiline:!0,rows:"4",value:B,onChange:function(e){I(e.target.value)}})),r.a.createElement(s.a,{item:!0,xs:2},r.a.createElement("div",{className:""!==B?A.submitBtn:A.submitBtnDisabled,onClick:function(t){t.preventDefault(),""!==B&&(e.SendMessage({owner:w.number,number:a,method:1,time:Date.now(),message:B}),I(""))}},r.a.createElement(b.a,{icon:"paper-plane",className:A.submitIcon}))))))}))}}]);